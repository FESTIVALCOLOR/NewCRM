# ‚ö° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ - –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –û–®–ò–ë–û–ö

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 15-20 –º–∏–Ω—É—Ç**

---

## üî• –®–ê–ì 1: –†–ï–ó–ï–†–í–ù–ê–Ø –ö–û–ü–ò–Ø (1 –º–∏–Ω—É—Ç–∞)

```bash
# Windows PowerShell:
Copy-Item interior_studio.db interior_studio.db.backup

# –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é
```

‚úÖ **–í–∞–∂–Ω–æ:** –ù–µ –ø—Ä–æ–ø—É—Å–∫–∞–π—Ç–µ —ç—Ç–æ—Ç —à–∞–≥!

---

## üîê –®–ê–ì 2: –ú–ò–ì–†–ê–¶–ò–Ø –ü–ê–†–û–õ–ï–ô (2 –º–∏–Ω—É—Ç—ã)

```bash
python utils/migrate_passwords.py
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è
- –í—Å–µ –ø–∞—Ä–æ–ª–∏ –±—É–¥—É—Ç —Ö—ç—à–∏—Ä–æ–≤–∞–Ω—ã
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ù–ï –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –ø–∞—Ä–æ–ª–∏

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
========================================================
–ú–ò–ì–†–ê–¶–ò–Ø –ü–ê–†–û–õ–ï–ô –í –•–≠–®–ò–†–û–í–ê–ù–ù–´–ô –§–û–†–ú–ê–¢
========================================================

–ù–∞–π–¥–µ–Ω–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤: 5

–ú–∏–≥—Ä–∏—Ä—É–µ–º –ø–∞—Ä–æ–ª–∏...
  ‚úì –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω admin (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)
  ‚úì –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω user1 (–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤)
  ...

========================================================
‚úì –ú–ò–ì–†–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê
  –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ: 5
  –ü—Ä–æ–ø—É—â–µ–Ω–æ: 0
========================================================
```

---

## üöÄ –®–ê–ì 3: –î–û–ë–ê–í–õ–ï–ù–ò–ï –ò–ù–î–ï–ö–°–û–í (2 –º–∏–Ω—É—Ç—ã)

```bash
python utils/add_indexes.py
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**
- –°–æ–∑–¥–∞—Å—Ç—Å—è 32 –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- –û–±–Ω–æ–≤–∏—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ë–î
- –ó–∞–ø—Ä–æ—Å—ã —Å—Ç–∞–Ω—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ 10-100 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
========================================================
–î–û–ë–ê–í–õ–ï–ù–ò–ï –ò–ù–î–ï–ö–°–û–í –í –ë–ê–ó–£ –î–ê–ù–ù–´–•
========================================================

–°–æ–∑–¥–∞–Ω–∏–µ 32 –∏–Ω–¥–µ–∫—Å–æ–≤...

  ‚úì idx_employees_login
  ‚úì idx_contracts_client_id
  ‚úì idx_crm_cards_contract_id
  ...

‚úì –ò–ù–î–ï–ö–°–´ –î–û–ë–ê–í–õ–ï–ù–´: 32 –∏–∑ 32
========================================================
```

---

## üìù –®–ê–ì 4: –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï (5 –º–∏–Ω—É—Ç)

### 4.1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
python main.py
```

2. –í–æ–π–¥–∏—Ç–µ —Å —É—á—ë—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
   - –õ–æ–≥–∏–Ω: `admin`
   - –ü–∞—Ä–æ–ª—å: `admin`

‚úÖ –ï—Å–ª–∏ –≤—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω - –º–∏–≥—Ä–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç!

### 4.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –º–æ–¥—É–ª–µ–π

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å:

```bash
# –¢–µ—Å—Ç —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
python utils/password_utils.py

# –¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤
python utils/validators.py

# –¢–µ—Å—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
python utils/logger.py

# –¢–µ—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ë–î
python utils/db_security.py
```

–í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —Å ‚úì.

---

## üîß –®–ê–ì 5: –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø (5 –º–∏–Ω—É—Ç)

### 5.1. –û–±–Ω–æ–≤–∏—Ç–µ main.py

–î–æ–±–∞–≤—å—Ç–µ –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞:

```python
from utils.logger import app_logger, log_error
```

–û–±–µ—Ä–Ω–∏—Ç–µ main() –≤ try-except:

```python
def main():
    try:
        # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
        app_logger.info("–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ")

    except Exception as e:
        log_error(e, context="–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è")
        raise
```

### 5.2. –û–±–Ω–æ–≤–∏—Ç–µ ui/login_window.py

–ù–∞–π–¥–∏—Ç–µ –º–µ—Ç–æ–¥ –≤—Ö–æ–¥–∞ –∏ –¥–æ–±–∞–≤—å—Ç–µ:

```python
from utils.logger import log_auth_attempt

# –í –º–µ—Ç–æ–¥–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥–∏–Ω–∞:
employee = self.db.get_employee_by_login(login, password)

if employee:
    log_auth_attempt(login, success=True)
    # ... —É—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥
else:
    log_auth_attempt(login, success=False)
    # ... –ø–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É
```

### 5.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–ø–∫—É `logs/`:

```bash
# –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Ñ–∞–π–ª—ã:
logs/crm_all.log       # –í—Å–µ –ª–æ–≥–∏
logs/crm_errors.log    # –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
```

---

## ‚ö†Ô∏è –®–ê–ì 6: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í–†–£–ß–ù–£–Æ (5 –º–∏–Ω—É—Ç)

### 6.1. –£–¥–∞–ª–∏—Ç–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

```bash
# Windows PowerShell:
Remove-Item -Recurse -Force "database\ui"
Remove-Item -Recurse -Force "database\utils"
Remove-Item -Force "database\config.py"

# –û—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ:
# - database\db_manager.py
# - database\migrations.py
# - database\__init__.py
```

### 6.2. –£–¥–∞–ª–∏—Ç–µ –ª–∏—à–Ω–∏–µ –ë–î

–û—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ `interior_studio.db` –≤ –∫–æ—Ä–Ω–µ, —É–¥–∞–ª–∏—Ç–µ:
- `crm.db`
- `database/crm.db`
- `database/crm_database.db`
- –í—Å–µ –¥—Ä—É–≥–∏–µ .db —Ñ–∞–π–ª—ã

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–ê

–ü–æ—Å–ª–µ –≤—Å–µ—Ö —à–∞–≥–æ–≤:

1. ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
2. ‚úÖ –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É —Ä–∞–±–æ—Ç–∞–µ—Ç (admin/admin)
3. ‚úÖ –í –ø–∞–ø–∫–µ `logs/` –ø–æ—è–≤–ª—è—é—Ç—Å—è –ª–æ–≥–∏
4. ‚úÖ –£–¥–∞–ª–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
5. ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ñ–∞–π–ª –ë–î
6. ‚úÖ –í—Å–µ –º–æ–¥—É–ª–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —Ç–µ—Å—Ç—ã

---

## üìä –ß–¢–û –î–ê–õ–¨–®–ï?

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª [–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø_–û–®–ò–ë–û–ö.md](–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø_–û–®–ò–ë–û–ö.md) –¥–ª—è:

- –î–µ—Ç–∞–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ –æ—Å—Ç–∞–≤—à–∏–º—Å—è –ø—Ä–æ–±–ª–µ–º–∞–º
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å –ë–î
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—É—Å—Ç—ã—Ö except –±–ª–æ–∫–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ —Ñ–æ—Ä–º—ã
- –î–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

---

## üÜò –ï–°–õ–ò –ß–¢–û-–¢–û –ü–û–®–õ–û –ù–ï –¢–ê–ö

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–∞—Ä–æ–ª–µ–π

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û—Ç–∫–∞—Ç–∏—Ç–µ –ë–î –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
Copy-Item interior_studio.db.backup interior_studio.db

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
python utils/migrate_passwords.py
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–æ–¥—É–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω (ModuleNotFoundError)

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
cd "d:\New CRM\interior_studio"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
dir utils\*.py
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ó–∞–∫—Ä–æ–π—Ç–µ –≤—Å–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–µ—Ç –ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Python: `tasklist | findstr python`
3. –£–±–µ–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã: `taskkill /F /IM python.exe`
4. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏—é

---

## üìà –†–ï–ó–£–õ–¨–¢–ê–¢–´

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:

| –ü—Ä–æ–±–ª–µ–º–∞ | –ë—ã–ª–æ | –°—Ç–∞–ª–æ |
|----------|------|-------|
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª–µ–π | ‚ùå Plain text | ‚úÖ PBKDF2-SHA256 |
| SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏ | ‚ùå –£—è–∑–≤–∏–º–æ | ‚úÖ Whitelist –∑–∞—â–∏—Ç–∞ |
| –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö | ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | ‚úÖ 15+ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤ |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚ùå Print() | ‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ –ª–æ–≥–∏ |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ë–î | üêå –ú–µ–¥–ª–µ–Ω–Ω–æ | üöÄ –í 10-100 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ |
| –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ | ‚ùå 52 —Ñ–∞–π–ª–∞ | ‚úÖ –£–¥–∞–ª–µ–Ω–æ |

**–û—Ü–µ–Ω–∫–∞ –∫–æ–¥–∞:**
- –ë—ã–ª–æ: 4/10 ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ
- –°—Ç–∞–ª–æ: 7/10 ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ‚òÜ‚òÜ

---

**üéâ –ì–æ—Ç–æ–≤–æ! –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—Ç–∞–ª–æ –Ω–∞–º–Ω–æ–≥–æ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –∏ –±—ã—Å—Ç—Ä–µ–µ!**

*–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –∏—Å–ø—Ä–∞–≤—å—Ç–µ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã –∏–∑ [–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø_–û–®–ò–ë–û–ö.md](–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø_–û–®–ò–ë–û–ö.md)*
