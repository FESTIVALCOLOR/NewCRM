{
  "model": "opus",
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Review edit arguments: $ARGUMENTS\n\nCheck these Interior Studio CRM rules:\n1. If file is in ui/ directory: Check new_string for emoji (Unicode above U+2600 like icons/symbols). Emoji are BANNED in UI code.\n2. If file is in server/ directory: Output '[DEPLOY] Docker rebuild required: docker-compose down && docker-compose build --no-cache api && docker-compose up -d'\n3. If new_string loads resources (QPixmap/QIcon/open with file path) WITHOUT resource_path(): Flag as '[RULE] Must use resource_path() for all resources'\n4. If new_string has FramelessWindowHint with border != 1px: Flag as '[RULE] Border must be 1px for FramelessWindowHint dialogs'\n\nRespond ONLY with violations found, or 'OK' if clean. Be very brief.",
            "model": "claude-haiku-4-5-20251001",
            "statusMessage": "Validating project rules...",
            "timeout": 15
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "A file was written: $ARGUMENTS\n\nCheck Interior Studio CRM rules:\n1. If file is in ui/ directory: Check for emoji characters (BANNED in UI)\n2. If file is in server/ directory: Output '[DEPLOY] Docker rebuild required after server changes'\n3. If file loads resources without resource_path(): Flag it\n4. If file has __init__.py missing in database/, ui/, or utils/: Flag it\n\nRespond ONLY with violations or 'OK'. Be brief.",
            "model": "claude-haiku-4-5-20251001",
            "statusMessage": "Validating written file...",
            "timeout": 15
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "A bash command will run: $ARGUMENTS\n\nCheck ONLY if this is a git commit command. If yes:\n- Verify the commit message does NOT contain emoji\n- Output '[PRE-COMMIT] Ensure py_compile passed for modified .py files'\nFor all other commands: respond 'OK'.\nBe brief.",
            "model": "claude-haiku-4-5-20251001",
            "statusMessage": "Checking command...",
            "timeout": 10
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "agent",
            "prompt": "You are a compatibility checker for Interior Studio CRM.\n\nCheck if any server files (server/main.py, server/schemas.py, server/database.py) were modified in this session.\n\nIf server files were modified:\n1. Read server/main.py and find all @app.get/@app.post/@app.put/@app.patch/@app.delete endpoints\n2. Read utils/api_client.py and verify each endpoint has a matching method\n3. Check that response field names in server match what the UI expects\n4. Output any mismatches found\n\nIf no server files were modified, output 'OK - no server changes'.\n\nBe concise. Only report actual mismatches.",
            "model": "claude-haiku-4-5-20251001",
            "statusMessage": "Checking server-client compatibility...",
            "timeout": 30
          }
        ]
      }
    ]
  },
  "permissions": {
    "allow": [
      "Bash(python:*)",
      "Bash(python3:*)",
      "Bash(python -m py_compile:*)",
      "Bash(.venv/Scripts/python.exe:*)",
      "Bash(.venv/Scripts/pip.exe:*)",
      "Bash(.venvScriptspython.exe:*)",
      "Bash(.venvScriptspip.exe:*)",
      "Bash(\".venv\\\\Scripts\\\\python.exe\":*)",
      "Bash(\".venv\\\\Scripts\\\\pip.exe\":*)",
      "Bash(\".venv\\\\Scripts\\\\pyinstaller.exe\":*)",
      "Bash(\".venv\\\\\\\\Scripts\\\\\\\\python.exe\":*)",
      "Bash(\"d:\\\\New CRM\\\\interior_studio\\\\.venv\\\\Scripts\\\\python.exe\":*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(git checkout:*)",
      "Bash(git remote set-url:*)",
      "Bash(git fetch:*)",
      "Bash(ssh:*)",
      "Bash(scp:*)",
      "Bash(curl:*)",
      "Bash(powershell -Command:*)",
      "Bash(powershell -ExecutionPolicy Bypass -File:*)",
      "Bash(dir:*)",
      "Bash(ls:*)",
      "Bash(del:*)",
      "Bash(findstr:*)",
      "Bash(ping:*)",
      "Bash(taskkill:*)",
      "Bash(timeout:*)",
      "Bash(bash:*)",
      "Bash(echo:*)",
      "Bash(sqlite3:*)",
      "Bash(start python:*)",
      "Bash(sshpass:*)",
      "WebFetch(domain:www.anthropic.com)"
    ],
    "deny": [],
    "ask": []
  }
}
